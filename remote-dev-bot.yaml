# Remote Dev Bot Configuration
# Usage: /agent-<mode>[-<model>]
#   /agent-resolve             — resolve issue, open PR (default model)
#   /agent-resolve-claude-large — resolve issue with specific model
#   /agent-design              — design discussion, post comment
#   /agent-design-claude-large  — design discussion with specific model

default_model: claude-small

# Commit trailer appended to OpenHands commits (resolve mode only).
# Supported variables: {model_alias}, {model_id}, {oh_version}
# Set to empty string to disable.
commit_trailer: "Model: {model_alias} ({model_id}), openhands-ai v{oh_version}"

# Modes define what the agent does. Each mode has an action and optional defaults.
modes:
  resolve:
    action: pr               # Run OpenHands, open a draft PR
    default_model: claude-small
  design:
    action: comment           # Post analysis as an issue comment (no code changes)
    default_model: claude-small
    context_files:
      - README.md
      - CONTRIBUTING.md
      - AGENTS.md
      - CLAUDE.md
      - .gemini/GEMINI.md
      - .openhands/microagents/repo.md
      - how-it-works.md
    prompt_prefix: >
      You are analyzing this issue for design discussion.
      Do NOT write code or open a PR. Instead, provide thoughtful
      analysis, surface trade-offs, suggest approaches, and ask
      clarifying questions. Respond in a GitHub comment.
      IMPORTANT: Never begin your response with a slash command like /agent
      or any text that could trigger another bot action.
      Do NOT end your response with conversational invitations like
      "Want me to elaborate?" or "Let me know if you have questions."
      Your response is a design document, not a chat message.
      IMPORTANT: You have been given a limited set of context files. If the
      issue touches code or behavior you cannot verify from those files, say
      so explicitly. Do NOT invent function names, describe behavior you
      haven't seen, or assume how unshared code works. Acknowledging what
      you cannot see is more useful than a confident answer based on guesses.

models:
  claude-small:
    id: anthropic/claude-sonnet-4-5
    description: "Balanced cost/capability — good default for most tasks"

  claude-large:
    id: anthropic/claude-opus-4-5
    description: "Most capable — for complex multi-file features"

  gpt-small:
    id: openai/gpt-5.1-codex-mini
    description: "OpenAI GPT-5.1 Codex Mini — good default"

  gpt-large:
    id: openai/gpt-5.2-codex
    description: "OpenAI GPT-5.2 Codex — best coding model"

  gemini-small:
    id: gemini/gemini-2.5-flash
    description: "Google Gemini 2.5 Flash — good default"

  gemini-large:
    id: gemini/gemini-2.5-pro
    description: "Google Gemini 2.5 Pro"

# OpenHands settings
openhands:
  # Pin to a specific version to avoid regressions (check for updates periodically)
  version: "1.4.0"
  # Max agent iterations per run (controls cost ceiling)
  max_iterations: 50
  # PR type: "draft" or "ready"
  pr_type: ready
  # Target branch for PRs
  target_branch: main
  # What to do when the agent can't fully resolve the issue (success=False):
  #   comment — post a comment with the agent's evaluation, no PR (default)
  #   draft   — post the same comment AND open a draft PR with partial changes
  on_failure: comment
